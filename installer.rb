#!/usr/bin/env ruby
#Install shit on linux automatically
require 'tty-command'
require 'colorize'
require 'logger'

apt = File.readlines("aptinstall.txt").map(&:chomp &&:strip)
git = File.readlines("gitinstall.txt").map(&:chomp &&:strip)
pip = File.readlines("pipinstall.txt").map(&:chomp &&:strip)

def command
  log = Logger.new('debug.log')
  cmd = TTY::Command.new(output: log)
end

def update_os
  puts "Updating OS"
  out, err = command.run!("apt-get -y update && apt-get -y upgrade")
  puts out
end

def apt_install(command, apt)
  apt.each do |install|
    puts "Installing: #{install}"
    out, err = command.run!("apt-get -y install #{install}")
    puts out
  end
end


def git_install(command, git)
  git.each do |install|
    app = install.split("/")[-1].split('.')[0]
    puts "Cloning #{install} From Github"
    out, err = command.run!("git clone #{install} /root/randomstorm/#{app}")
    puts out
  end
end

def pip_install(command, pip)
  pip.each do |install|
    puts "Installing #{install} Using PIP"
    out, err = command.run!("pip install #{install}")
    puts out
  end
end

command
update_os
apt_install(command, apt)
git_install(command, git)
pip_install(command, pip)
